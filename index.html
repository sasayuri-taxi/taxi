<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>インタラクティブ同行援護研修プログラム (Gemini API搭載版)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Warm neutrals with slate and amber accents) -->
    <!-- Application Structure Plan: A responsive two-column layout is used. A sticky sidebar navigation allows users to easily jump between the 12 training sessions. The main content area is dynamically updated with JS, presenting one session at a time. This structure prevents overwhelming the user with a long scroll and allows for focused learning on a specific topic. Interactive elements like accordions for case studies and new Gemini API-powered generators encourage active engagement rather than passive reading. This design was chosen for its clarity, ease of navigation, and suitability for structured, interactive educational content. -->
    <!-- Visualization & Content Choices: Report Info: 12-month training plan -> Goal: Provide an easy-to-navigate overview and detailed exploration -> Viz/Method: A dynamic SPA with a sidebar for navigation and a main content area. Report Info: Case studies and solutions -> Goal: Encourage active thinking -> Viz/Method: JS-powered accordion/toggle to show/hide solutions. Report Info: Heinrich's Law (1:29:300 ratio) -> Goal: Visually represent the abstract ratio -> Viz/Method: A Chart.js bar chart to make the concept immediately understandable. Report Info: User-driven scenario generation -> Goal: Provide infinite, practical training scenarios -> Viz/Method: Gemini API call via a text input and button, displaying the generated text in a dedicated area. Report Info: User-driven description practice -> Goal: Allow users to practice a core skill -> Viz/Method: Gemini API call to generate model descriptions based on user input. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
            background-color: #FDFBF8; /* Warm off-white */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .content-card {
            background-color: #FFFFFF;
            border: 1px solid #E5E7EB;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }
        .nav-link {
            transition: all 0.2s ease-in-out;
        }
        .nav-link.active {
            background-color: #D97706; /* Amber 600 */
            color: white;
            transform: translateX(4px);
        }
        .solution-toggle {
            cursor: pointer;
            background-color: #FEF3C7; /* Amber 100 */
            color: #92400E; /* Amber 800 */
            transition: background-color 0.2s;
        }
        .solution-toggle:hover {
            background-color: #FDE68A; /* Amber 200 */
        }
        .solution-content {
            background-color: #FFFBEB; /* Amber 50 */
            border-left: 4px solid #F59E0B; /* Amber 500 */
        }
        .gemini-card {
            background-color: #F0F9FF; /* Sky 50 */
            border: 1px solid #BAE6FD; /* Sky 200 */
        }
        .gemini-button {
            background-color: #0284C7; /* Sky 600 */
            color: white;
            transition: background-color 0.2s;
        }
        .gemini-button:hover {
            background-color: #0369A1; /* Sky 700 */
        }
        .gemini-button:disabled {
            background-color: #7DD3FC; /* Sky 300 */
            cursor: not-allowed;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #0284C7;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-slate-800">

    <div class="max-w-screen-xl mx-auto p-4 md:p-8">
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">同行援護のプロを目指すための特別研修プログラム</h1>
            <p class="mt-4 text-lg text-slate-600">確かな技術と、一歩進んだ対応力をその手に (✨Gemini API搭載)</p>
            <p class="mt-2 text-md text-slate-500">監修：介護サービスセンターささゆり</p>
        </header>

        <div class="flex flex-col md:flex-row md:space-x-8">
            <aside class="w-full md:w-1/4 mb-8 md:mb-0">
                <div class="sticky top-8">
                    <h2 class="text-lg font-bold mb-4 text-slate-700">研修プログラム (全12回)</h2>
                    <nav id="session-nav" class="flex flex-col space-y-2"></nav>
                </div>
            </aside>

            <main id="session-content" class="w-full md:w-3/4">
            </main>
        </div>
    </div>

    <script>
        const trainingData = [
             {
                id: 0,
                title: "はじめに",
                icon: "🚀",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-4 text-slate-900">はじめに：頼れる支援者から、真のプロフェッショナルへ</h2>
                        <div class="space-y-6 text-slate-700">
                            <div>
                                <h3 class="text-xl font-semibold mb-2 text-amber-700">このプログラムが目指すもの</h3>
                                <p>この研修は、すでに同行援護の基本的な資格を持ち、現場での経験がある方を対象としています。これまでの研修が、サービス提供に必要な「基礎」と「応用」の技術を学ぶものだったのに対し、このプログラムは、さらにその先にある「プロとしての実践力」を身につけることを目指します。私たちの目標は、ただ手順通りに仕事ができる支援者を育てることではありません。複雑な状況でも的確に考え、判断し、周りを引っ張っていけるような「エキスパート」を育てることです。このプログラムでは、「何をするか」という知識だけでなく、「なぜそうするのか」「様々な状況にどう対応するか」という、現場で本当に役立つ知恵を学んでいきます。</p>
                            </div>
                             <div>
                                <h3 class="text-xl font-semibold mb-2 text-amber-700">1年で身につける3つの大切な力</h3>
                                <ol class="list-decimal list-inside space-y-1">
                                    <li><strong>物事を整理して分析する力：</strong> 複雑な状況（環境、人間関係、利用者の健康状態などが絡み合う場面）を冷静に分析し、問題解決の糸口を見つける力。</li>
                                    <li><strong>利用者が自分で考えて行動できるよう後押しする力：</strong> 支援者が何でもやってあげる「代行者」ではなく、利用者が自分で決め、自分の権利を主張し、便利なテクノロジーを使いこなせるように手助けする「案内役」になるための力。</li>
                                    <li><strong>自分の仕事ぶりを振り返り、次に活かす力：</strong> 自分の支援を客観的に見つめ直し、成功からも失敗からも学び、プロとして成長し続ける習慣。</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <div class="content-card gemini-card">
                        <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI研修レコメンダー</h3>
                        <p class="mb-4 text-slate-600">あなたが今、現場で直面している課題や学びたいことを入力してください。AIがこの研修プログラムの中から、あなたに最適なセッションをおすすめします。</p>
                        <div>
                            <textarea id="recommender-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：最近、利用者さんとのコミュニケーションがうまくいかない時がある..."></textarea>
                            <button id="generate-recommender-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">おすすめの研修を教えてもらう</button>
                        </div>
                        <div id="recommender-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                            ここにAIからのおすすめが表示されます。
                        </div>
                    </div>
                `
            },
            {
                id: 1,
                title: "プロの仕事を支える法律と心構え",
                icon: "⚖️",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第1回：プロの仕事を支える法律と心構え</h2>
                        <p class="text-lg text-slate-600 mb-6">法律を「知っている」から「使える」へ。障害者差別解消法の精神を深く理解し、現場での交渉力と、複雑な倫理的ジレンマに対応する判断力を養う。</p>
                        
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">障害者差別解消法：現場での「交渉術」としての活用</h3>
                                <p class="mb-4">この法律の核心は「社会的障壁」を取り除くことです。プロとして、私たちはこの法律を盾に戦うのではなく、相手方と協力して障壁を取り除くための「交渉のツール」として活用します。そのために、以下の2つの重要な違いを理解します。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>不当な差別的取扱い（禁止）：</strong>これは「障害があること」を理由にサービス提供を拒否するなど、明確に禁止されている行為です。この場合は、毅然とした態度で、それが法に反することを指摘する必要があります。</li>
                                    <li><strong>合理的配慮の提供（義務/努力義務）：</strong>これが現場での交渉の中心です。国や地方公共団体には配慮を提供する「法的義務」が、民間事業者には「努力義務」があります。この違いを知っていると、交渉の仕方が変わります。例えば、民間のお店に対しては「ご負担が重すぎない範囲で、何かご協力いただけませんか？」と、相手の状況を思いやる姿勢で交渉を始めることが有効です。</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">ケーススタディ：合理的配慮の交渉プロセス</h3>
                                <p class="mb-4">各シナリオについて、ただ解決策を知るだけでなく、交渉がうまくいかなかった場合の「次の手」まで考えます。</p>
                                ${createSolutionToggle(
                                    'シナリオ：混雑したレストランでの席の確保',
                                    '<strong>状況：</strong>人気レストランで、店員に「車椅子や白杖の方は、他のお客様の迷惑になるので…」と入店を断られそうになっている。',
                                    `<strong>解決策のポイント：</strong>「不当な差別」に該当する可能性を視野に入れつつも、まずは協力関係を築くことを目指します。<br>
                                    <ol class="list-decimal list-inside space-y-2 mt-2">
                                        <li><strong>共感と理解を示す：</strong>「お忙しい時間帯に申し訳ありません。お店が混雑しているのはよく分かります」と、まず相手の状況に理解を示します。</li>
                                        <li><strong>具体的な解決策の提案：</strong>「もし可能でしたら、一番端の、人の行き来が少ない席を案内していただけないでしょうか。そうすれば、他のお客様の動線を妨げることもないかと思います」と、具体的な代替案を提示します。</li>
                                        <li><strong>法的根拠の提示（ソフトに）：</strong>「障害者差別解消法では、こうした状況で話し合い、解決策を探すことが求められていると認識しております。何か良い方法を一緒に考えさせていただけませんか」と、法律を「協力の根拠」として使います。</li>
                                        <li><strong>次の手（エスカレーション）：</strong>もし店員が応じない場合は、「店長の方とお話しさせていただくことは可能でしょうか？」と、責任者との対話を求めます。その際のやり取りは、日時、担当者名、内容を記録しておくことが重要です。</li>
                                    </ol>`
                                )}
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">プロの倫理観：グレーゾーンでの判断力を磨く</h3>
                                <p class="mb-4">教科書通りの答えがない、現場の「グレーゾーン」でどう判断するかを議論します。</p>
                                 ${createSolutionToggle(
                                    '利用者との適切な距離感：二重関係のリスク',
                                    '<strong>課題：</strong>利用者から「あなただけが頼りなの」と言われ、休日に個人的な買い物を頼まれた。どう対応すべきか？',
                                    `<strong>解決策の考え方：</strong>これは「二重関係（デュアル・リレーションシップ）」と呼ばれる、専門職としての関係と個人的な関係が混在する危険な状態です。特定の支援者への依存は、その支援者がいなくなった時に利用者を孤立させ、他の支援者との関係構築を妨げます。<br>
                                    <ol class="list-decimal list-inside space-y-2 mt-2">
                                        <li><strong>感謝と共感を伝える：</strong>「そのように頼りにしていただき、ありがとうございます。とても嬉しいです」と、まず相手の気持ちを受け止めます。</li>
                                        <li><strong>専門職としての立場を明確にする：</strong>「ただ、私はあくまで事業所の支援員という立場ですので、個人的にお手伝いすることは規則で禁じられているのです。申し訳ありません」と、個人的な感情ではなく、プロとしてのルールであることを伝えます。</li>
                                        <li><strong>代替案と組織としての対応を提示する：</strong>「もしお買い物が緊急で必要でしたら、事業所に連絡して、正式なサービスとして他の職員が対応できるか確認してみましょうか？」と、問題を個人ではなく組織の課題として捉え直し、解決策を提示します。</li>
                                    </ol>`
                                )}
                                ${createSolutionToggle(
                                    '秘密を守る義務：チーム内での情報共有の境界線',
                                    '<strong>課題：</strong>支援で知った利用者の恋愛事情。チーム内の他の支援者にどこまで共有すべきか？',
                                    `<strong>解決策の考え方：</strong>情報共有の原則は「知る必要性（Need-to-know basis）」です。つまり、その情報が「利用者のより良いケアに直接必要かどうか」が判断基準となります。<br>
                                    <p class="mt-2">恋愛事情そのものは、通常ケアに直接関係ありません。しかし、もし「失恋によって利用者の食欲が落ち、服薬拒否につながっている」という状況であれば、「最近、精神的に不安定なご様子で、食事や服薬に影響が出ています」という形で、ケアに必要な情報のみを抽象化して共有します。具体的な恋愛の詳細は共有すべきではありません。</p>`
                                )}
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI倫理・法律相談パートナー</h3>
                                <p class="mb-4 text-slate-600">現場で判断に迷う倫理的・法的な質問を入力してください。AIが関連法規や倫理指針に基づき、多角的な視点から考えるヒントを提供します。</p>
                                <div>
                                    <textarea id="ethic-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：利用者から高価なプレゼントを渡されたが、受け取っても良いか？"></textarea>
                                    <button id="generate-ethic-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">AIに相談する</button>
                                </div>
                                <div id="ethic-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここにAIからのアドバイスが表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 2,
                title: "目の病気と見え方の関係、そして「見えにくさ」へのケア",
                icon: "👁️",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第2回：目の病気と見え方の関係、そして「見えにくさ」へのケア</h2>
                        <p class="text-lg text-slate-600 mb-6">病名から「機能的な影響」を予測し、画一的な支援ではなく、個々の「見えにくさ」に合わせたオーダーメイドの支援計画を立てる能力を養う。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">単なる「見え方」から「機能的・社会的影響」の理解へ</h3>
                                <p class="mb-4">利用者の困難は、単に見えにくいことだけではありません。それに伴う二次的な困難を理解することが、プロの支援の鍵となります。</p>
                                
                                <div class="p-4 bg-slate-50 rounded-lg">
                                    <h4 class="font-semibold text-slate-800">緑内障（視野狭窄）のケース</h4>
                                    <ul class="list-disc list-inside mt-2 space-y-2 text-slate-700">
                                        <li><strong>見え方の特徴：</strong>視野が周辺から欠けていき、中心部だけが残る（トンネルビジョン）。進行は非常にゆっくり。</li>
                                        <li><strong>機能的な影響：</strong>
                                            <ul class="list-circle list-inside ml-4">
                                                <li>足元の段差や障害物に気づきにくい。</li>
                                                <li>横から来る人や自転車を避けられない。</li>
                                                <li>人混みでの移動は、常に周囲をスキャンする必要があり、極度の精神的疲労（認知負荷）を伴う。</li>
                                            </ul>
                                        </li>
                                        <li><strong>社会的影響：</strong>
                                            <ul class="list-circle list-inside ml-4">
                                                <li>頻繁にぶつかることで、周囲から「不注意な人」と誤解されることがある。</li>
                                                <li>人混みを避けるようになり、社会参加の機会が減少する。</li>
                                            </ul>
                                        </li>
                                        <li><strong>プロの支援のポイント：</strong>
                                            <ul class="list-circle list-inside ml-4">
                                                <li>半歩前を歩き、支援者が「バンパー」の役割を果たす。</li>
                                                <li>「右から人が来ます」「3メートル先、通路が左に曲がります」など、周辺視野を補う情報を先読みして提供する。</li>
                                                <li>混雑した場所では、一度立ち止まって休憩し、認知的な負荷を軽減する時間を作ることを提案する。</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                             <div>
                                <div class="p-4 bg-slate-50 rounded-lg">
                                    <h4 class="font-semibold text-slate-800">加齢黄斑変性（中心暗点）のケース</h4>
                                    <ul class="list-disc list-inside mt-2 space-y-2 text-slate-700">
                                        <li><strong>見え方の特徴：</strong>見たい中心部が黒い点になったり、歪んで見えたりする。周辺の視野は保たれることが多い。</li>
                                        <li><strong>機能的な影響：</strong>
                                            <ul class="list-circle list-inside ml-4">
                                                <li>人の顔が認識できない。文字の読み書きが困難。</li>
                                                <li>色の識別が難しくなることがある。</li>
                                                <li>「偏心固視」という、見える部分（周辺視野）を使って物を見ようとする技術を自然に使うが、非常に疲れる。</li>
                                            </ul>
                                        </li>
                                        <li><strong>社会的影響：</strong>
                                            <ul class="list-circle list-inside ml-4">
                                                <li>知人の顔が分からず挨拶をしないことで、「無愛想な人」と誤解される。</li>
                                                <li>食事の際に食べこぼしをしやすくなる。</li>
                                            </ul>
                                        </li>
                                        <li><strong>プロの支援のポイント：</strong>
                                            <ul class="list-circle list-inside ml-4">
                                                <li>人を説明する際は「正面にいる赤い服の女性が、〇〇さんです」と、顔以外の特徴で伝える。</li>
                                                <li>書類やメニューを読む際は、利用者の「見えるポイント（偏心固視点）」を探り、そこに文字が来るように提示する。</li>
                                                <li>食事の際は、時計の文字盤を使って「3時の方向にコップがあります」と位置を伝える（クロックポジション）。</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                             <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI支援法提案ジェネレーター</h3>
                                <p class="mb-4 text-slate-600">利用者の病名と直面している状況を入力すると、AIがその方に合わせた具体的な支援方法のアイデアを提案します。</p>
                                <div class="space-y-4">
                                    <div>
                                        <label for="support-disease-input" class="block font-medium text-slate-700">目の病気</label>
                                        <input type="text" id="support-disease-input" class="w-full p-2 border border-slate-300 rounded-md" placeholder="例：緑内障初期">
                                    </div>
                                    <div>
                                        <label for="support-situation-input" class="block font-medium text-slate-700">状況</label>
                                        <input type="text" id="support-situation-input" class="w-full p-2 border border-slate-300 rounded-md" placeholder="例：スーパーでの買い物">
                                    </div>
                                    <button id="generate-support-btn" class="gemini-button font-bold py-2 px-4 rounded-md w-full">支援方法を提案</button>
                                </div>
                                <div id="support-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに提案が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 3,
                title: "情報提供の技術：言葉で風景を伝える達人になる",
                icon: "🗣️",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第3回：情報提供の技術：言葉で風景を伝える達人になる</h2>
                        <p class="text-lg text-slate-600 mb-6">単なる実況中継から、利用者の「心の目」に情景を映し出し、行動の選択肢を広げるための高度な言語技術を習得する。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">情報提供の3つのレベル</h3>
                                <p class="mb-4">プロとして、私たちはレベル3を目指します。</p>
                                <ol class="list-decimal list-inside space-y-2">
                                    <li><strong>レベル1（安全確保）：</strong>「段差があります」「信号が赤です」など、危険回避のための最低限の情報。</li>
                                    <li><strong>レベル2（状況理解）：</strong>「右手にパン屋、左手に郵便局があります」など、周囲の環境を客観的に伝える情報。</li>
                                    <li><strong>レベル3（体験の共有と選択肢の提供）：</strong>「右手のパン屋さんから、焼きたての甘い香りがしています。店内は2、3人のお客さんで、それほど混んでいないようです。もしよろしければ、少し寄ってみますか？」など、五感の情報と行動の提案を組み合わせ、利用者の体験を豊かにする情報。</li>
                                </ol>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">高度な描写技術：静的情報と動的情報の伝え分け</h3>
                                <p class="mb-4">場面に応じて、情報の種類と伝え方を使い分ける練習をします。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>静的情報の描写（例：静かな公園）：</strong>「全体から部分へ」の原則を徹底します。「広々とした芝生の公園です。あなたの11時の方向、50メートル先に大きなクスノキがあり、その下に木製のベンチが3つ並んでいます。一番右のベンチが空いています」</li>
                                    <li><strong>動的情報の描写（例：混雑した交差点）：</strong>情報の優先順位付けとフィルタリングが鍵となります。「信号はまだ赤です。横断歩道を、たくさんの人がこちら側に向かって渡ってきています。人の流れが少し途切れたら、横断歩道のボタンを押しに行きましょう」と、安全確保を最優先し、行動計画を伝えます。</li>
                                </ul>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI曖昧表現リフレーズツール</h3>
                                <p class="mb-4 text-slate-600">「あっち」「そこ」など、つい使ってしまう曖昧な言葉を、AIが具体的で分かりやすい表現に変換します。</p>
                                <div>
                                    <textarea id="rephrase-input" class="w-full p-2 border border-slate-300 rounded-md" rows="2" placeholder="例：トイレはあっちです。"></textarea>
                                    <button id="generate-rephrase-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">表現を変換</button>
                                </div>
                                <div id="rephrase-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに変換結果が表示されます。
                                </div>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ 状況描写アシスタント</h3>
                                <p class="mb-4 text-slate-600">練習したい場面のキーワード（例：「公園のベンチ」「交差点」）を入力して、AIにレベル3の模範的な状況描写を作成させてみましょう。</p>
                                <div class="flex flex-col sm:flex-row gap-2">
                                    <input type="text" id="desc-input" class="flex-grow p-2 border border-slate-300 rounded-md" placeholder="例：夕方の商店街">
                                    <button id="generate-desc-btn" class="gemini-button font-bold py-2 px-4 rounded-md">描写を生成</button>
                                </div>
                                <div id="desc-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに結果が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 4,
                title: "複雑で予測不能な場所でのナビゲーション術",
                icon: "🗺️",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第4回：複雑で予測不能な場所でのナビゲーション術</h2>
                        <p class="text-lg text-slate-600 mb-6">O&M（歩行訓練）の専門的知識を応用し、未知の環境でも安全なルートを構築する「環境分析能力」と「戦略的プランニング能力」を身につける。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">O&M（Orientation and Mobility）理論の応用</h3>
                                <p class="mb-4">私たちはO&Mの専門家ではありませんが、その基本理論を理解し、支援に応用することは極めて有効です。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>オリエンテーション（環境定位）：</strong>自分がどこにいて、目的地がどの方向にあるかを把握すること。支援者は利用者の「外部コンパス」として機能します。「背中に駅の改札を感じながら、まっすぐ12時の方向に進むと、正面にバスロータリーが広がっています」と、常に基準点との関係性を伝えます。</li>
                                    <li><strong>モビリティ（移動）：</strong>安全かつ効率的に移動する技術。これには、O&Mの専門技術である「ショアライニング（壁や縁石など、連続した線をたどって歩く技術）」や「ランドマーク（触覚や聴覚で確認できる目印）の活用」を、支援者が言語情報として提供することなどが含まれます。</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">戦略的ルートプランニング：メンタル・ウォークスルーの実践</h3>
                                <p class="mb-4">初めての場所へ行く前に、頭の中で移動のシミュレーションを行います。これは単なる道順の確認ではありません。</p>
                                <div class="p-4 bg-slate-50 rounded-lg">
                                    <h4 class="font-semibold text-slate-800">例：初めての市民ホールでのコンサート</h4>
                                    <ol class="list-decimal list-inside mt-2 space-y-2 text-slate-700">
                                        <li><strong>情報収集：</strong>Googleマップのストリートビューで外観と周辺を確認。公式サイトで館内マップ、バリアフリー情報を確認。「多目的トイレは1階ロビーの右手奥」などの情報を事前にインプット。</li>
                                        <li><strong>リスク予測：</strong>「駅からの道は歩道が狭いかもしれない」「終演後は出口が非常に混雑するだろう」「館内は音が反響して方向が分かりにくいかもしれない」など、潜在的な問題を洗い出します。</li>
                                        <li><strong>多層的計画（Plan A/B/C）：</strong>
                                            <ul class="list-circle list-inside ml-4">
                                                <li><strong>プランA（理想）：</strong>予定通りの電車で到着し、最も近い出口から出て、最短ルートでホールへ向かう。</li>
                                                <li><strong>プランB（次善）：</strong>電車が遅延した場合。タクシーを利用する。そのために、駅のタクシー乗り場の位置を事前に確認しておく。</li>
                                                <li><strong>プランC（緊急）：</strong>終演後、混雑で身動きが取れない場合。無理に動かず、ロビーの壁際で人のの流れが落ち着くのを待つ。その場所を事前に決めておく。</li>
                                            </ul>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                             <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI環境音分析シミュレーター</h3>
                                <p class="mb-4 text-slate-600">特定の場所で聞こえる「音」が、ナビゲーションにどう役立つか考えてみましょう。場所を入力すると、AIが代表的な音とその意味を解説します。</p>
                                <div>
                                    <input type="text" id="sound-input" class="w-full p-2 border border-slate-300 rounded-md" placeholder="例：駅のホーム">
                                    <button id="generate-sound-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">音情報を分析</button>
                                </div>
                                <div id="sound-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに分析結果が表示されます。
                                </div>
                            </div>
                             <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AIプランニングアシスタント</h3>
                                <p class="mb-4 text-slate-600">これから向かう複雑な状況（場所、時間、目的など）を具体的に入力してください。AIがリスク分析と多層的な行動計画（プランA/B/C）の立案をサポートします。</p>
                                <div>
                                    <textarea id="plan-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：土曜日の午後3時に、初めて利用する利用者を連れて、大規模なショッピングモールのフードコートへ行く。"></textarea>
                                    <button id="generate-plan-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">行動計画を立案</button>
                                </div>
                                <div id="plan-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに計画の草案が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 5,
                title: "ケーススタディ：失敗と複雑な事例から学ぶ",
                icon: "📚",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第5回：ケーススタディ・ワークショップ：失敗と複雑な事例から学ぶ</h2>
                        <p class="text-lg text-slate-600 mb-6">失敗を個人の責任にせず、組織的な学習の機会と捉える文化を醸成する。具体的な分析フレームワークを用いて、再発防止策を導き出す能力を養う。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">事例分析フレームワーク：Gibbsのリフレクティブ・サイクル</h3>
                                <p class="mb-4">単なる感想の共有で終わらせないために、構造化された振り返りのモデルを導入します。これにより、経験からの学びを深め、具体的な次の行動計画につなげます。</p>
                                <div class="p-4 bg-slate-50 rounded-lg">
                                    <h4 class="font-semibold text-slate-800">事例：利用者が初めて利用するスーパーで、商品が見つけられず混乱し、パニック気味になった。</h4>
                                    <ol class="list-decimal list-inside mt-2 space-y-2 text-slate-700">
                                        <li><strong>Description (描写):</strong> 何が起きたか？ - 利用者が牛乳を探していたが見つからず、次第に無口になり、立ち尽くしてしまった。</li>
                                        <li><strong>Feelings (感情):</strong> 自分はどう感じたか？ - 利用者の焦りが伝わってきて、自分も焦った。「早く見つけなければ」とプレッシャーを感じた。</li>
                                        <li><strong>Evaluation (評価):</strong> 何が上手くいき、何が問題だったか？ - 上手くいった点：最終的に店員に聞いて見つけられた。問題点：利用者が混乱する前に、支援のやり方を変えられなかった。</li>
                                        <li><strong>Analysis (分析):</strong> なぜそうなったのか？ - 初めての場所で、まず全体像を伝えずにいきなり商品探しを始めたため、利用者は自分が店のどこにいるか分からなくなった（オリエンテーションの失敗）。情報提供が断片的すぎた。</li>
                                        <li><strong>Conclusion (結論):</strong> 何を学ぶことができたか？ - 新しい屋内環境では、まず壁際を伝って一周するなどして、利用者が空間の全体像（メンタルマップ）を把握するのを手伝うことが重要だと学んだ。</li>
                                        <li><strong>Action Plan (行動計画):</strong> 次に同じような状況になったらどうするか？ - 次回、初めての店に行く際は、まず入り口で「右手前に野菜、奥に肉と魚、左手奥に乳製品のコーナーがあるようです」と全体のレイアウトを説明してから、目的の場所に向かう。</li>
                                    </ol>
                                </div>
                            </div>
                             <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI支援記録要約・客観化ツール</h3>
                                <p class="mb-4 text-slate-600">あなたの支援メモ（感想や感情を含んでもOK）を入力してください。AIが客観的で専門的な「支援記録」の形式に変換します。</p>
                                <div>
                                    <textarea id="record-input" class="w-full p-2 border border-slate-300 rounded-md" rows="4" placeholder="例：今日の〇〇さんは、スーパーで牛乳が見つからなくてイライラしているように見えた。私も焦ってしまって、うまく説明できなかったのが悔しい。"></textarea>
                                    <button id="generate-record-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">支援記録に変換</button>
                                </div>
                                <div id="record-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに変換後の記録が表示されます。
                                </div>
                            </div>
                             <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AIガイド付きリフレクションツール</h3>
                                <p class="mb-4 text-slate-600">あなたが経験した支援事例を簡単に入力してください。AIがGibbsのサイクルに基づいた質問を投げかけ、あなたの振り返りをサポートします。</p>
                                <div>
                                    <textarea id="reflection-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：初めての場所で、利用者が混乱してしまった。"></textarea>
                                    <button id="generate-reflection-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">振り返りを開始</button>
                                </div>
                                <div id="reflection-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここにAIからの質問が表示されます。
                                </div>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AIシナリオジェネレーター</h3>
                                <p class="mb-4 text-slate-600">研修で使いたいシナリオのキーワード（例：「駅のホーム」「初めて行くレストラン」）を入力して、AIに新しいケーススタディを作成させてみましょう。</p>
                                <div class="flex flex-col sm:flex-row gap-2">
                                    <input type="text" id="scenario-input" class="flex-grow p-2 border border-slate-300 rounded-md" placeholder="例：大雨の日のバス停">
                                    <button id="generate-scenario-btn" class="gemini-button font-bold py-2 px-4 rounded-md">シナリオを生成</button>
                                </div>
                                <div id="scenario-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに結果が表示されます。
                                </div>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI事例分析＆ディスカッションポイント生成</h3>
                                <p class="mb-4 text-slate-600">分析したいケーススタディ（AIが生成したものでも可）を貼り付けてください。AIが主要な論点と、グループディスカッションで話し合うべき点を提案します。</p>
                                <div>
                                    <textarea id="analysis-input" class="w-full p-2 border border-slate-300 rounded-md" rows="4" placeholder="ここに分析したいケーススタディを入力..."></textarea>
                                    <button id="generate-analysis-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">分析と論点を生成</button>
                                </div>
                                <div id="analysis-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに分析結果が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 6,
                title: "生活の中の様々な場面での支援",
                icon: "🏦",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第6回：移動だけじゃない！生活の中の様々な場面での支援</h2>
                        <p class="text-lg text-slate-600 mb-6">各場面における支援者の役割と法的・倫理的境界線を明確に理解し、利用者の自己決定を最大化するための高度なコミュニケーション支援技術を習得する。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">役所・銀行での手続き：代読・代筆のプロトコル</h3>
                                <p class="mb-4">代読・代筆は単なる作業ではありません。利用者の意思決定を保障するための法的な意味合いを持つ行為です。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>代読の原則：</strong>一字一句、書かれている通りに読み上げます。要約したり、自分の解釈を加えたりすることは厳禁です。難しい専門用語があった場合は、「ここに〇〇と書かれていますが、これは〇〇という意味だそうです、と窓口の方が説明しています」と、情報の出所を明確にして伝えます。</li>
                                    <li><strong>代筆の原則：</strong>利用者の言葉をそのまま書き取ります。支援者の判断で内容を変えたり、補ったりしてはいけません。代筆した箇所には、「本人〇〇の意思に基づき、同行援護従業者△△が代筆」のように、誰が代筆したかを明記することが、後のトラブルを防ぐために重要です。可能であれば、窓口の職員に第三者として同席・確認を依頼します。</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">病院でのサポート：医療メディエーターとしての役割</h3>
                                <p class="mb-4">病院での支援者の役割は、医療行為に関わることではなく、医師と利用者との間のコミュニケーションの橋渡し役（メディエーター）に徹することです。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>診察前：</strong>利用者と一緒に、今日医師に伝えたいこと（症状、質問など）をメモにまとめるのを手伝います。</li>
                                    <li><strong>診察中：</strong>医師からの説明で、利用者が理解しにくいと感じた表情を見せたら、「先生、今のお話をもう少し分かりやすい言葉で説明していただけますか？」と、利用者に代わって質問を促します。支援者自身が医学的な判断やアドバイスをしてはいけません。</li>
                                    <li><strong>診察後：</strong>医師からの説明や処方された薬について、利用者が正しく理解できたかを確認します。「次の診察は2週間後で、このお薬を毎食後に飲む、という理解で合っていますか？」のように、復唱して確認を促します。</li>
                                </ul>
                            </div>
                             <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI交渉ロールプレイシミュレーター</h3>
                                <p class="mb-4 text-slate-600">合理的配慮を求める交渉を練習しましょう。あなたの最初の言葉を投げかけると、AIが相手役（店員、駅員など）として応答します。</p>
                                <div>
                                    <textarea id="negotiation-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：「すみません、こちらの商品の賞味期限を読み上げていただけますか？」"></textarea>
                                    <button id="start-negotiation-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">交渉を開始</button>
                                </div>
                                <div id="negotiation-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここにAIの応答が表示されます。
                                </div>
                            </div>
                             <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI医療情報伝達トレーナー</h3>
                                <p class="mb-4 text-slate-600">医師からの難しい説明を想定して入力してください。AIが利用者に分かりやすく伝えるための言い換えと、確認すべき質問を提案します。</p>
                                <div>
                                    <textarea id="medical-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：検査の結果、加齢黄斑変性と診断します。新生血管の増殖を抑えるため、抗VEGF薬の硝子体内注射を月一回行います。"></textarea>
                                    <button id="generate-medical-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">言い換えと質問を生成</button>
                                </div>
                                <div id="medical-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに結果が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 7,
                title: "盲ろう（目と耳の両方に障害がある）の方への支援入門",
                icon: "🤟",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第7回：盲ろう（目と耳の両方に障害がある）の方への支援入門</h2>
                        <p class="text-lg text-slate-600 mb-6">盲ろうの多様性を深く理解し、初期対応とアセスメントの基本を学ぶ。自身の役割の限界を認識し、適切な専門機関へ確実につなぐための知識と手順を習得する。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">「盲ろう」の多様性とアセスメントの視点</h3>
                                <p class="mb-4">盲ろうの方への支援は、まずその方がどのタイプの盲ろうなのかを理解することから始まります。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>全盲ろう：</strong>視覚も聴覚も全く活用できない方。コミュニケーションは触手話や指点字など、完全に触覚に頼ります。</li>
                                    <li><strong>弱視ろう：</strong>聴覚は活用できないが、視覚はある程度活用できる方（弱視）。拡大文字や、近づいての手話（近接手話）などが有効な場合があります。</li>
                                    <li><strong>難聴盲：</strong>視覚は活用できないが、聴覚はある程度活用できる方（難聴）。補聴器を活用したり、静かな場所で、はっきり、ゆっくり話すことで音声コミュニケーションが可能な場合があります。</li>
                                    <li><strong>弱視難聴：</strong>視覚も聴覚も、ある程度は活用できる方。補聴器と眼鏡の両方を使うなど、残存機能を最大限に活用します。</li>
                                </ul>
                                <p class="mt-4">支援者は、利用者がどのコミュニケーション手段を好むか、どの程度の距離や明るさが見やすい・聞きやすいかを丁寧に確認（アセスメント）する必要があります。</p>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">支援の原則と専門機関への連携</h3>
                                <p class="mb-4 font-bold text-red-700">同行援護従業者としての私たちの第一の役割は、専門家ではありません。安全を確保し、基本的なニーズを確認した上で、速やかに専門機関につなぐことです。</p>
                                <ol class="list-decimal list-inside space-y-2">
                                    <li><strong>初期対応（安全確保と意思疎通）：</strong>まず、相手に触れる前に声をかけ、肩にそっと触れて存在を伝えます。「手のひらに書きますね」と断ってから、簡単な自己紹介と目的（「こんにちは、ヘルパーです」）を伝えます。</li>
                                    <li><strong>環境調整：</strong>残存機能を使えるように、環境を整えます。例えば、弱視の方なら明るい場所に、難聴の方なら静かな場所に移動します。</li>
                                    <li><strong>専門機関への連携：</strong>利用者の状況を把握したら、サービス提供責任者に報告し、地域の「盲ろう者向け通訳・介助員派遣事業」や「盲ろう者友の会」などの専門機関に連絡を取り、引き継ぎます。私たちが単独で支援を続けるべきではありません。</li>
                                </ul>
                            </div>
                             <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI盲ろう者コミュニケーションシミュレーター</h3>
                                <p class="mb-4 text-slate-600">盲ろうの方に「手のひら書き」で伝えたい簡単なメッセージを入力してください。AIがその書き順や注意点を分かりやすく解説します。</p>
                                <div>
                                    <input type="text" id="comm-input" class="w-full p-2 border border-slate-300 rounded-md" placeholder="例：トイレはあちらです">
                                    <button id="generate-comm-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">伝え方をシミュレーション</button>
                                </div>
                                <div id="comm-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに解説が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 8,
                title: "先を見越したリスク管理と事故防止の仕組みづくり",
                icon: "🛡️",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第8回：先を見越したリスク管理と事故防止の仕組みづくり</h2>
                        <p class="text-lg text-slate-600 mb-6">個人の注意深さに頼るリスク管理から脱却し、ハインリッヒの法則やFMEAなどの工学的安全理論に基づいた、組織的な事故防止システムを構築する視点を学ぶ。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">ハインリッヒの法則：ヒヤリハットは「宝の山」</h3>
                                <p class="mb-4">1件の重大事故の背景には、29件の軽微な事故と300件のヒヤリハットが存在します。この法則が示す重要なことは、重大事故は「運が悪かった」のではなく「起こるべくして起きた」ということです。300のヒヤリハットを放置すれば、いずれ重大事故につながります。逆に、ヒヤリハットを積極的に報告・分析し、その根本原因を潰していくことが、最も効果的な事故防止策となります。</p>
                                <div class="chart-container">
                                    <canvas id="heinrichChart"></canvas>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">実践的リスク分析手法：簡易FMEA（故障モード影響解析）</h3>
                                <p class="mb-4">FMEAは、もともと工学分野で使われるリスク分析手法です。これを参考に、支援プロセスに潜むリスクを体系的に洗い出す練習をします。</p>
                                <div class="p-4 bg-slate-50 rounded-lg">
                                    <h4 class="font-semibold text-slate-800">テーマ：利用者を乗せてタクシーで移動する</h4>
                                     <table class="w-full text-left border-collapse mt-2">
                                        <thead>
                                            <tr class="bg-slate-200">
                                                <th class="border border-slate-300 p-2">手順</th>
                                                <th class="border border-slate-300 p-2">失敗モード（何が起こりうるか）</th>
                                                <th class="border border-slate-300 p-2">影響（どうなるか）</th>
                                                <th class="border border-slate-300 p-2">対策（どう防ぐか）</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="border-b border-slate-200">
                                                <td class="border border-slate-300 p-2">1. タクシーを呼ぶ</td>
                                                <td class="border border-slate-300 p-2">迎車場所を間違える</td>
                                                <td class="border border-slate-300 p-2">待ちぼうけ、予約キャンセル</td>
                                                <td class="border border-slate-300 p-2">迎車場所の目印を明確に伝える</td>
                                            </tr>
                                            <tr class="border-b border-slate-200">
                                                <td class="border border-slate-300 p-2">2. 乗車する</td>
                                                <td class="border border-slate-300 p-2">頭や体をドアにぶつける</td>
                                                <td class="border border-slate-300 p-2">怪我、不快感</td>
                                                <td class="border border-slate-300 p-2">ドアの上部に手を添え「ヘッドクリアランス」を確保する</td>
                                            </tr>
                                            <tr>
                                                <td class="border border-slate-300 p-2">3. 降車・支払い</td>
                                                <td class="border border-slate-300 p-2">降車時に後方から来た自転車と接触</td>
                                                <td class="border border-slate-300 p-2">重大な事故</td>
                                                <td class="border border-slate-300 p-2">支援者が先に降り、後方の安全を完全に確認してから利用者に声をかける</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ ヒヤリハット根本原因分析AI</h3>
                                <p class="mb-4 text-slate-600">現場で経験した「ヒヤリハット」事例を具体的に入力してください。AIが「なぜなぜ5回分析」の手法で、その背景にある根本原因を探る手助けをします。</p>
                                <div>
                                    <textarea id="rca-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：利用者がスーパーの床にこぼれていた水で滑りそうになった。"></textarea>
                                    <button id="generate-rca-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">根本原因を分析</button>
                                </div>
                                <div id="rca-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに分析結果が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 9,
                title: "文化・芸術を楽しむお手伝い：美術館での体験",
                icon: "🎨",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第9回：文化・芸術を楽しむお手伝い：美術館での体験を通じた総まとめ</h2>
                        <p class="text-lg text-slate-600 mb-6">これまで学んだスキル（計画、交渉、ナビゲーション、描写、リスク管理）を総動員し、美術館訪問という具体的なプロジェクトを計画・実行する総合演習。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">フェーズ1：プロジェクト計画（事前準備）</h3>
                                <p class="mb-4">プロの仕事は、現場に出る前に8割が決まります。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>情報収集とアセスメント：</strong>美術館の公式サイトで「バリアフリー情報」「触れる展示の有無」「オンラインチケットの可否」を確認。利用者本人に「どんな作品に興味がありますか？」「どのくらいの時間なら疲れずに鑑賞できそうですか？」と希望や体調をヒアリングします。</li>
                                    <li><strong>事前交渉と連携：</strong>美術館の学芸員や担当部署に電話。「視覚障害のある方の鑑賞をサポートしたいのですが、何か利用できるプログラムやツールはありますか？」「比較的空いている曜日や時間帯はありますか？」と、専門家として対等な立場で連携を図ります。</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">フェーズ2：机上シミュレーション（訪問当日）</h3>
                                <p class="mb-4">グループワークで、具体的な場面を想定して対応を議論します。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>対話型美術鑑賞（VTS）の実践：</strong>一方的に説明するのではなく、VTS（Visual Thinking Strategies）の手法を用います。「この絵を見て、何が描かれていると思いますか？」「そう思ったのは、絵のどの部分からですか？」「他に何か気づくことはありますか？」と問いかけることで、利用者の想像力や思考を引き出し、共に作品を創り上げていくような鑑賞体験を目指します。</li>
                                    <li><strong>感覚を組み合わせた鑑賞支援：</strong>触れる模型がある場合は、それを触ってもらいながら、全体の形や質感を言葉で補います。「今触っているザラザラした部分が、ゴッホが描いた麦畑です」のように、触覚と言語情報をリンクさせます。</li>
                                </ul>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ 対話型鑑賞(VTS)練習パートナー</h3>
                                <p class="mb-4 text-slate-600">練習したい芸術作品の描写を入力してください。AIが美術愛好家の役割を演じ、あなたのVTSスキル実践のパートナーになります。</p>
                                <div>
                                    <textarea id="vts-input" class="w-full p-2 border border-slate-300 rounded-md" rows="4" placeholder="例：青と黄色の渦巻く夜空の下に、小さな町が描かれています。中央には大きな糸杉が天に向かって伸びています。"></textarea>
                                    <button id="generate-vts-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">対話を開始</button>
                                </div>
                                <div id="vts-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここにAIからの応答が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 10,
                title: "災害への備えと緊急時の対応",
                icon: "🚨",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第10回：災害への備えと緊急時の対応</h2>
                        <p class="text-lg text-slate-600 mb-6">国のガイドラインに基づき、災害サイクル（備え→発災直後→避難生活→復旧）の各段階で、視覚障害者の特有のニーズを理解し、命と尊厳を守るための具体的な支援計画を立案する。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">「個別避難計画」作成の支援</h3>
                                <p class="mb-4">災害時に「助けてもらう」のを待つのではなく、地域社会の一員として「共に避難する」ために、平常時から「個別避難計画」を作成しておくことが極めて重要です。支援者は、利用者が行政や地域住民と協力してこの計画を作成する際のファシリテーターとなります。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>情報整理の支援：</strong>緊急連絡先、必要な薬、障害の特性、必要な配慮などを1枚のシートにまとめるのを手伝います。</li>
                                    <li><strong>避難経路の確認：</strong>利用者と一緒に自宅から避難所までのルートを実際に歩き、危険な箇所（側溝、ガラスの多い建物など）や、目印となるもの（触ってわかる壁の材質など）を確認し、触覚地図（タクタイルマップ）の作成を検討します。</li>
                                    <li><strong>地域の支援者との連携：</strong>民生委員や隣人など、いざという時に支援をお願いする人（避難支援等実施者）と利用者との顔合わせの場を設定し、計画内容を共有するのを支援します。</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">避難所での「情報保障」と「環境整備」</h3>
                                <p class="mb-4">避難所では、視覚障害者は情報から遮断され、安全な移動が困難になります。支援者は、利用者の「目と耳」となり、尊厳ある避難生活を守るための交渉役を担います。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>情報保障：</strong>避難所の運営本部に、視覚障害者がいることを明確に伝えます。配給や連絡事項などの掲示物を定期的に読み上げてもらうよう依頼したり、支援者自身が情報を伝達したりします。</li>
                                    <li><strong>環境整備：</strong>安全なスペース（壁際など、人の往来が少ない場所）を確保します。トイレや支援物資の配布場所までの安全なルートを一緒に確認し、ロープやテープなどで手すり（伝い歩きできるガイド）を設置できないか、運営本部に交渉します。</li>
                                </ul>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI個別避難計画ジェネレーター</h3>
                                <p class="mb-4 text-slate-600">利用者の状況を具体的に入力してください。AIがその人に合わせた、パーソナライズされた「個別避難計画」の草案を作成します。</p>
                                <div>
                                    <textarea id="disaster-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：70代女性、一人暮らし、木造アパート2階。緑内障で中心視野のみ。杖歩行。近所に頼れる親族はいない。"></textarea>
                                    <button id="generate-disaster-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">避難計画を作成</button>
                                </div>
                                <div id="disaster-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに計画の草案が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 11,
                title: "支援の未来：便利なテクノロジーの活用",
                icon: "📱",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第11回：支援の未来：便利なテクノロジー（支援技術）の活用</h2>
                        <p class="text-lg text-slate-600 mb-6">テクノロジーを「魔法の杖」ではなく「道具」として正しく理解し、その限界とリスクを把握した上で、利用者のエンパワメントを最大化するための導入支援と評価ができる能力を養う。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">支援者の新しい役割：テクノロジー・ファシリテーター</h3>
                                <p class="mb-4">私たちの役割は、アプリの使い方を教えるだけではありません。</p>
                                <ol class="list-decimal list-inside space-y-2">
                                    <li><strong>アセスメントと選択支援：</strong>利用者の目的（「外出先でメニューが読みたい」「バスの行き先を知りたい」）、スマートフォンの習熟度、予算などを総合的に評価し、数ある選択肢の中から最適なアプリやデバイスを一緒に選びます。</li>
                                    <li><strong>トレーニングと定着支援：</strong>基本的な使い方だけでなく、エラーが起きた時の対処法や、より便利な使い方のコツなどを教え、利用者が自信を持って使えるようになるまで伴走します。</li>
                                    <li><strong>人間によるバックアップ：</strong>テクノロジーの限界を常に意識します。例えば、OCR（光学的文字認識）アプリがレシートを読み間違えた場合や、GPSが不正確な場合に、最終的な確認と判断を行うのは人間の役割です。テクノロジーに「丸投げ」しないことがプロの鉄則です。</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">テクノロジーのリスクと倫理的課題</h3>
                                <p class="mb-4">便利なツールには、必ずリスクが伴います。これらの課題について議論します。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>プライバシーの問題：</strong>カメラを使ったアプリは、意図せず周囲の人の顔や個人情報を写し込んでしまう可能性があります。公共の場での使い方について、利用者に注意を促す必要があります。</li>
                                    <li><strong>依存とスキルの喪失：</strong>ナビゲーションアプリに頼りすぎることで、本来持っていた方向感覚や環境を記憶する力が失われる可能性があります。アプリを使う場面と、使わずに自分の力で移動する練習をする場面を、意識的に使い分けることを提案します。</li>
                                    <li><strong>情報格差（デジタル・デバイド）：</strong>スマートフォンを使いこなせない、あるいは所有していない利用者が、テクノロジーの恩恵から取り残されないように、従来からの支援方法も継続して提供し続ける必要があります。</li>
                                </ul>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AIテクノロジー導入計画ジェネレーター</h3>
                                <p class="mb-4 text-slate-600">導入したい技術と利用者の状況を入力してください。AIが段階的な指導計画を立案します。</p>
                                <div class="space-y-4">
                                    <div>
                                        <label for="tech-name-input" class="block font-medium text-slate-700">導入したい技術（アプリ名など）</label>
                                        <input type="text" id="tech-name-input" class="w-full p-2 border border-slate-300 rounded-md" placeholder="例：Seeing AI">
                                    </div>
                                    <div>
                                        <label for="tech-user-input" class="block font-medium text-slate-700">利用者の状況</label>
                                        <input type="text" id="tech-user-input" class="w-full p-2 border border-slate-300 rounded-md" placeholder="例：70代、スマートフォン初心者">
                                    </div>
                                    <button id="generate-tech-plan-btn" class="gemini-button font-bold py-2 px-4 rounded-md w-full">導入計画を作成</button>
                                </div>
                                <div id="tech-plan-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに計画の草案が表示されます。
                                </div>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AI支援技術提案ツール</h3>
                                <p class="mb-4 text-slate-600">利用者の「こんなことができたら…」という希望や困りごとを入力してください。AIがそれを解決するための便利なアプリやデバイスを提案します。</p>
                                <div>
                                    <textarea id="tech-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：外出先で、薬の色や形を自分で確認したい。"></textarea>
                                    <button id="generate-tech-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">支援技術を提案</button>
                                </div>
                                <div id="tech-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに提案が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 12,
                title: "この仕事を長く続けていくために",
                icon: "❤️",
                content: `
                    <div class="content-card">
                        <h2 class="text-2xl font-bold mb-2 text-slate-900">第12回：この仕事を長く続けていくために：セルフケア、燃え尽き予防、そして仲間との支え合い</h2>
                        <p class="text-lg text-slate-600 mb-6">対人援助職におけるバーンアウトを構造的な問題として理解し、個人の努力だけに頼らない、組織的・個人的なセルフケア戦略と、専門職として成長し続けるための仕組み（ピア・スーパービジョン）を構築する。</p>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">バーンアウトの構造的理解と3つのサイン</h3>
                                <p class="mb-4">バーンアウトは「やる気」の問題ではなく、過度なストレスによるエネルギーの枯渇状態です。特に以下の3つのサインに注意します。</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>情緒的消耗感：</strong>仕事によって、心がすり減ってしまった、疲れ果てたと感じる。</li>
                                    <li><strong>脱人格化：</strong>利用者に対して、思いやりのない、機械的な対応をしてしまう。皮肉な態度をとる。</li>
                                    <li><strong>個人的達成感の低下：</strong>仕事で良い結果を出しても、達成感を感じられない。自分の仕事に価値を見出せなくなる。</li>
                                </ul>
                                <p class="mt-4">これらのサインは、個人への警告であると同時に、職場環境や働き方を見直す必要があるという組織へのサインでもあります。</p>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">専門的成長の仕組み：ピア・スーパービジョン</h3>
                                <p class="mb-4">ピア・スーパービジョンは、同僚（ピア）同士が対等な立場で、お互いの実践を振り返り、支援し合うための構造化された話し合いの場です。これは単なる「おしゃべり」や「愚痴の言い合い」ではありません。</p>
                                <div class="p-4 bg-slate-50 rounded-lg">
                                    <h4 class="font-semibold text-slate-800">ピア・スーパービジョンの進め方（例）</h4>
                                    <ol class="list-decimal list-inside mt-2 space-y-2 text-slate-700">
                                        <li><strong>役割分担：</strong>その日の司会進行役、タイムキーパーを決める。</li>
                                        <li><strong>チェックイン（5分）：</strong>各メンバーが今の気分や体調を簡単に共有する。</li>
                                        <li><strong>事例提供（10分）：</strong>一人が、最近の支援で悩んでいること、困っていることを具体的に話す。</li>
                                        <li><strong>質疑応答（10分）：</strong>他のメンバーは、事例の状況をより深く理解するために、評価や助言をせず、質問だけを行う。</li>
                                        <li><strong>フィードバックとブレインストーミング（15分）：</strong>他のメンバーが、事例提供者への敬意を払いながら、「私だったらこうするかもしれない」「こんな視点もあるのでは？」と、様々なアイデアや視点を提供する。</li>
                                        <li><strong>事例提供者の振り返り（5分）：</strong>提供者が、話し合いを通じて得た気づきや、明日から試してみたいことを語る。</li>
                                    </ol>
                                </div>
                            </div>
                             <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AIピアスーパービジョン・ファシリテーター</h3>
                                <p class="mb-4 text-slate-600">仲間と話し合いたい困難なケースについて入力してください。AIが建設的な議論のためのアジェンダや問いかけを生成します。</p>
                                <div>
                                    <textarea id="supervision-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：利用者が新しい支援者になかなか心を開いてくれない。"></textarea>
                                    <button id="generate-supervision-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">アジェンダを生成</button>
                                </div>
                                <div id="supervision-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここにアジェンダが表示されます。
                                </div>
                            </div>
                             <div>
                                <h3 class="text-xl font-semibold mb-3 text-amber-700">個人の成長計画（PDP）とSMARTゴール</h3>
                                <p class="mb-4">1年間の学びの集大成として、具体的で測定可能な個人の成長計画（Personal Development Plan）を作成します。その際に、SMARTというフレームワークを活用します。</p>
                                <p><strong>例：</strong>「来年の3月までに（Time-bound）、盲ろう者支援の基礎を学ぶために（Relevant）、地域の盲ろう者向け通訳・介助員養成研修の入門講座（Specific, Achievable）を受講し、修了証を取得する（Measurable）。」</p>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AIストレス対処法ブレインストーミング</h3>
                                <p class="mb-4 text-slate-600">最近の仕事でストレスを感じた状況を具体的に入力してください。AIが、その状況に合わせた具体的なセルフケアの方法や、考え方のヒントを提案します。</p>
                                <div>
                                    <textarea id="stress-input" class="w-full p-2 border border-slate-300 rounded-md" rows="3" placeholder="例：利用者の家族から厳しい言葉を言われてしまい、一日中落ち込んでしまった。"></textarea>
                                    <button id="generate-stress-btn" class="gemini-button font-bold py-2 px-4 rounded-md mt-2 w-full">対処法を提案</button>
                                </div>
                                <div id="stress-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに提案が表示されます。
                                </div>
                            </div>
                            <div class="content-card gemini-card">
                                <h3 class="text-xl font-semibold mb-4 text-sky-800">✨ AIパーソナル成長計画アシスタント</h3>
                                <p class="mb-4 text-slate-600">あなた自身の強み、改善したい点、興味のある分野を入力してください。AIがSMARTゴールに基づいた、具体的な成長計画の草案を作成します。</p>
                                <div class="space-y-4">
                                    <div>
                                        <label for="pdp-strengths" class="block font-medium text-slate-700">あなたの強み</label>
                                        <input type="text" id="pdp-strengths" class="w-full p-2 border border-slate-300 rounded-md" placeholder="例：利用者とすぐに打ち解けられる、道順を覚えるのが得意">
                                    </div>
                                    <div>
                                        <label for="pdp-weaknesses" class="block font-medium text-slate-700">改善したい点</label>
                                        <input type="text" id="pdp-weaknesses" class="w-full p-2 border border-slate-300 rounded-md" placeholder="例：パソコン操作が苦手、緊急時に焦ってしまう">
                                    </div>
                                    <div>
                                        <label for="pdp-interests" class="block font-medium text-slate-700">興味のある分野</label>
                                        <input type="text" id="pdp-interests" class="w-full p-2 border border-slate-300 rounded-md" placeholder="例：盲ろう者支援、新しい支援技術">
                                    </div>
                                    <button id="generate-pdp-btn" class="gemini-button font-bold py-2 px-4 rounded-md w-full">成長計画を作成</button>
                                </div>
                                <div id="pdp-result" class="mt-4 p-4 bg-white rounded-md min-h-[100px] border border-slate-200">
                                    ここに計画の草案が表示されます。
                                </div>
                            </div>
                        </div>
                    </div>
                `
            }
        ];

        let currentSessionId = 0;
        let chartInstance = null;

        const sessionNav = document.getElementById('session-nav');
        const sessionContent = document.getElementById('session-content');

        function createSolutionToggle(title, situation, solution) {
            return `
                <div class="border border-slate-200 rounded-lg">
                    <div class="solution-toggle p-3 font-semibold rounded-t-lg flex justify-between items-center">
                        <span>${title}</span>
                        <span class="text-xl transform transition-transform duration-300">+</span>
                    </div>
                    <div class="solution-content p-4 hidden">
                        <p class="mb-2">${situation}</p>
                        <div class="text-slate-700">${solution}</div>
                    </div>
                </div>
            `;
        }
        
        async function callGemini(prompt, resultElement, buttonElement) {
            resultElement.innerHTML = '<div class="loading-spinner"></div>';
            buttonElement.disabled = true;

            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{
                    role: "user",
                    parts: [{ text: prompt }]
                }],
                safetySettings: [
                    {
                        category: "HARM_CATEGORY_HARASSMENT",
                        threshold: "BLOCK_NONE"
                    },
                    {
                        category: "HARM_CATEGORY_HATE_SPEECH",
                        threshold: "BLOCK_NONE"
                    },
                    {
                        category: "HARM_CATEGORY_SEXUALLY_EXPLICIT",
                        threshold: "BLOCK_NONE"
                    },
                    {
                        category: "HARM_CATEGORY_DANGEROUS_CONTENT",
                        threshold: "BLOCK_NONE"
                    }
                ]
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorBody = await response.json().catch(() => response.text());
                    console.error("API HTTP Error Response:", errorBody);
                    let detail = (errorBody && errorBody.error && errorBody.error.message) ? errorBody.error.message : `HTTPステータス: ${response.status}`;
                    throw new Error(`APIサーバーとの通信に失敗しました。(${detail})`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    resultElement.innerHTML = text.replace(/\n/g, '<br>');
                } else {
                    console.warn("API Response blocked or empty:", JSON.stringify(result));
                    let reason = "不明な理由";
                    if (result.candidates && result.candidates[0] && result.candidates[0].finishReason) {
                        reason = `理由: ${result.candidates[0].finishReason}`;
                        if(result.candidates[0].safetyRatings) {
                             reason += ` (セーフティ設定によるブロックの可能性)`;
                        }
                    }
                    resultElement.innerText = `AIが応答を生成できませんでした。(${reason}) プロンプトの内容を変更して再度お試しください。`;
                }
            } catch (error) {
                console.error("Gemini API Call Failed:", error);
                let errorMessage = 'AIとの通信中にエラーが発生しました。';
                if (error.message.includes('Failed to fetch')) {
                    errorMessage += 'ネットワーク接続、またはブラウザのセキュリティポリシー（CSP等）が原因の可能性があります。';
                } else {
                    errorMessage += `[詳細: ${error.message}]`;
                }
                resultElement.innerText = errorMessage;
            } finally {
                buttonElement.disabled = false;
            }
        }


        function renderNav() {
            sessionNav.innerHTML = '';
            trainingData.forEach(session => {
                const link = document.createElement('a');
                link.href = '#';
                link.innerHTML = `<span class="mr-2">${session.icon}</span> ${session.title}`;
                link.className = `nav-link block p-3 rounded-lg font-medium text-slate-700 hover:bg-amber-100 ${session.id === currentSessionId ? 'active' : ''}`;
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    currentSessionId = session.id;
                    renderNav();
                    renderContent();
                });
                sessionNav.appendChild(link);
            });
        }

        function renderContent() {
            const session = trainingData.find(s => s.id === currentSessionId);
            if (!session) return;

            sessionContent.innerHTML = session.content;

            if (chartInstance) {
                chartInstance.destroy();
                chartInstance = null;
            }



            if (session.id === 8) {
                renderHeinrichChart();
            }
            
            attachToggleListeners();
            attachGeminiListeners();
        }
        
        function attachToggleListeners() {
            document.querySelectorAll('.solution-toggle').forEach(toggle => {
                toggle.addEventListener('click', () => {
                    const content = toggle.nextElementSibling;
                    const icon = toggle.querySelector('span:last-child');
                    content.classList.toggle('hidden');
                    if (content.classList.contains('hidden')) {
                        icon.style.transform = 'rotate(0deg)';
                        icon.innerText = '+';
                    } else {
                        icon.style.transform = 'rotate(45deg)';
                        icon.innerText = '×';
                    }
                });
            });
        }
        
        function attachGeminiListeners() {
            // Existing Listeners
            const generateScenarioBtn = document.getElementById('generate-scenario-btn');
            if(generateScenarioBtn) {
                generateScenarioBtn.addEventListener('click', () => {
                    const input = document.getElementById('scenario-input');
                    const resultElement = document.getElementById('scenario-result');
                    if(input.value.trim() === '') {
                        resultElement.innerText = 'キーワードを入力してください。';
                        return;
                    }
                    const prompt = `あなたは同行援護の研修専門家です。以下のキーワードを元に、研修で使えるリアルなケーススタディのシナリオを一つ作成してください。状況、課題、考えるべき点を簡潔に、しかし具体的に記述してください。\n\nキーワード: 「${input.value}」`;
                    callGemini(prompt, resultElement, generateScenarioBtn);
                });
            }

            const generateDescBtn = document.getElementById('generate-desc-btn');
            if(generateDescBtn) {
                generateDescBtn.addEventListener('click', () => {
                    const input = document.getElementById('desc-input');
                    const resultElement = document.getElementById('desc-result');
                     if(input.value.trim() === '') {
                        resultElement.innerText = '場面を入力してください。';
                        return;
                    }
                    const prompt = `あなたは同行援護のプロで、言葉で風景を伝える達人です。以下の場面について、「全体から細かい部分へ」「客観的に」「五感を使って」という原則に基づき、視覚障害のある方に伝えるための状況描写を作成してください。\n\n場面: 「${input.value}」`;
                    callGemini(prompt, resultElement, generateDescBtn);
                });
            }
            
            const generateRcaBtn = document.getElementById('generate-rca-btn');
            if(generateRcaBtn) {
                generateRcaBtn.addEventListener('click', () => {
                    const input = document.getElementById('rca-input');
                    const resultElement = document.getElementById('rca-result');
                     if(input.value.trim() === '') {
                        resultElement.innerText = 'ヒヤリハット事例を入力してください。';
                        return;
                    }
                    const prompt = `あなたは介護分野のリスク管理専門家です。以下の「ヒヤリハット」事例について、「なぜなぜ5回分析」の手法を用いて根本原因を分析してください。表面的な原因から掘り下げて、最終的に組織やシステムの課題にたどり着くように分析結果を提示してください。\n\n事例: 「${input.value}」`;
                    callGemini(prompt, resultElement, generateRcaBtn);
                });
            }
            
            const generatePdpBtn = document.getElementById('generate-pdp-btn');
            if(generatePdpBtn) {
                generatePdpBtn.addEventListener('click', () => {
                    const strengths = document.getElementById('pdp-strengths').value;
                    const weaknesses = document.getElementById('pdp-weaknesses').value;
                    const interests = document.getElementById('pdp-interests').value;
                    const resultElement = document.getElementById('pdp-result');

                    if(strengths.trim() === '' || weaknesses.trim() === '' || interests.trim() === '') {
                        resultElement.innerText = 'すべての項目を入力してください。';
                        return;
                    }

                    const prompt = `あなたは介護専門職向けのキャリアコーチです。以下の自己分析に基づき、同行援護従業者のための具体的な個人の成長計画（PDP）の草案を作成してください。強みを活かし、弱みを克服し、興味を追求するためのSMARTゴール（Specific, Measurable, Achievable, Relevant, Time-bound）を2〜3個提案してください。\n\n【自己分析】\n- 強み: ${strengths}\n- 改善したい点: ${weaknesses}\n- 興味のある分野: ${interests}`;
                    callGemini(prompt, resultElement, generatePdpBtn);
                });
            }

            const generatePlanBtn = document.getElementById('generate-plan-btn');
            if(generatePlanBtn) {
                generatePlanBtn.addEventListener('click', () => {
                    const input = document.getElementById('plan-input');
                    const resultElement = document.getElementById('plan-result');
                     if(input.value.trim() === '') {
                        resultElement.innerText = '状況設定を入力してください。';
                        return;
                    }
                    const prompt = `あなたは経験豊富な同行援護の専門家であり、リスク管理のプロです。以下の状況設定に基づき、O&M（歩行訓練）の理論を取り入れた、詳細な外出計画を立案してください。計画には、1) 事前情報収集、2) 潜在的リスクの洗い出し、3) 多層的計画（プランA/B/C）の3つの要素を必ず含めてください。\n\n【状況設定】\n${input.value}`;
                    callGemini(prompt, resultElement, generatePlanBtn);
                });
            }

            const generateVtsBtn = document.getElementById('generate-vts-btn');
            if(generateVtsBtn) {
                generateVtsBtn.addEventListener('click', () => {
                    const input = document.getElementById('vts-input');
                    const resultElement = document.getElementById('vts-result');
                     if(input.value.trim() === '') {
                        resultElement.innerText = '作品の描写を入力してください。';
                        return;
                    }
                    const prompt = `あなたは視覚障害のある美術愛好家です。私はあなたの同行援護者として、対話型美術鑑賞（VTS）の練習をしています。私が以下に説明する芸術作品について、あなたはVTSの基本的な問いかけ「何が起きてると思いますか？」「そう思ったのは、作品のどの部分からですか？」「他に何か気づくことはありますか？」などを使いながら、興味深そうに対話を続けてください。あなたの役割は、私にさらに深い描写や考察を促すことです。\n\n【私が説明する作品】\n${input.value}`;
                    callGemini(prompt, resultElement, generateVtsBtn);
                });
            }
            
            const generateEthicBtn = document.getElementById('generate-ethic-btn');
            if(generateEthicBtn) {
                generateEthicBtn.addEventListener('click', () => {
                    const input = document.getElementById('ethic-input');
                    const resultElement = document.getElementById('ethic-result');
                     if(input.value.trim() === '') {
                        resultElement.innerText = '相談内容を入力してください。';
                        return;
                    }
                    const prompt = `あなたは日本の福祉法と介護倫理の専門家です。同行援護の研修生から、以下の倫理的・法的なジレンマについて相談を受けました。障害者差別解消法、個人情報保護法、および専門職倫理の観点から、状況を分析し、複数の対応選択肢とそれぞれのメリット・デメリットを提示してください。断定的な答えではなく、研修生が自分で考えるための材料を提供する形で回答してください。\n\n【相談内容】\n${input.value}`;
                    callGemini(prompt, resultElement, generateEthicBtn);
                });
            }

            const generateDisasterBtn = document.getElementById('generate-disaster-btn');
            if(generateDisasterBtn) {
                generateDisasterBtn.addEventListener('click', () => {
                    const input = document.getElementById('disaster-input');
                    const resultElement = document.getElementById('disaster-result');
                     if(input.value.trim() === '') {
                        resultElement.innerText = '利用者の状況を入力してください。';
                        return;
                    }
                    const prompt = `あなたは障害者防災の専門家です。以下の情報を持つ視覚障害のある利用者について、具体的でパーソナライズされた「個別避難計画」の草案を作成してください。計画には「平常時の備え」「発災直後の行動」「避難所での留意点」の3つのセクションを設け、それぞれに具体的なアクション項目をリストアップしてください。\n\n【利用者の情報】\n${input.value}`;
                    callGemini(prompt, resultElement, generateDisasterBtn);
                });
            }

            const generateSupportBtn = document.getElementById('generate-support-btn');
            if(generateSupportBtn) {
                generateSupportBtn.addEventListener('click', () => {
                    const disease = document.getElementById('support-disease-input').value;
                    const situation = document.getElementById('support-situation-input').value;
                    const resultElement = document.getElementById('support-result');

                    if(disease.trim() === '' || situation.trim() === '') {
                        resultElement.innerText = '病気と状況の両方を入力してください。';
                        return;
                    }

                    const prompt = `あなたは同行援護の専門家です。以下の目の病気を持つ利用者が、特定の状況で直面するであろう困難を予測し、それに対応するための具体的でプロフェッショナルな支援方法を3つ提案してください。\n\n【目の病気】\n${disease}\n\n【状況】\n${situation}`;
                    callGemini(prompt, resultElement, generateSupportBtn);
                });
            }

            const generateTechBtn = document.getElementById('generate-tech-btn');
            if(generateTechBtn) {
                generateTechBtn.addEventListener('click', () => {
                    const input = document.getElementById('tech-input').value;
                    const resultElement = document.getElementById('tech-result');
                     if(input.trim() === '') {
                        resultElement.innerText = '困りごとを入力してください。';
                        return;
                    }
                    const prompt = `あなたは視覚障害者向けの支援技術（アシスティブ・テクノロジー）の専門家です。以下の「困りごと」を解決するために、最も適したアプリやデバイスを3つ提案してください。それぞれのツールの名称、主な機能、そして同行援護従業者が利用者の導入をどのように支援できるかを具体的に説明してください。\n\n【困りごと】\n${input}`;
                    callGemini(prompt, resultElement, generateTechBtn);
                });
            }
            
            const generateMedicalBtn = document.getElementById('generate-medical-btn');
            if(generateMedicalBtn) {
                generateMedicalBtn.addEventListener('click', () => {
                    const input = document.getElementById('medical-input').value;
                    const resultElement = document.getElementById('medical-result');
                     if(input.trim() === '') {
                        resultElement.innerText = '医療情報を入力してください。';
                        return;
                    }
                    const prompt = `あなたは、医療ソーシャルワーカーであり、コミュニケーションの専門家です。以下の複雑な医療情報を、視覚障害のある利用者に付き添う同行援護従業者が、本人に分かりやすく伝えるためのセリフに書き換えてください。また、利用者が医師に確認すべき重要な質問を3つ提案してください。\n\n【医療情報】\n${input}`;
                    callGemini(prompt, resultElement, generateMedicalBtn);
                });
            }

            const generateCommBtn = document.getElementById('generate-comm-btn');
            if(generateCommBtn) {
                generateCommBtn.addEventListener('click', () => {
                    const input = document.getElementById('comm-input').value;
                    const resultElement = document.getElementById('comm-result');
                     if(input.trim() === '') {
                        resultElement.innerText = '伝えたいメッセージを入力してください。';
                        return;
                    }
                    const prompt = `あなたは、盲ろう者向け通訳・介助の専門家です。同行援護の研修生が、以下のメッセージを「手のひら書き」で伝えようとしています。その具体的な手順と、伝える際の注意点を、初心者にも分かりやすく説明してください。\n\n【伝えたいメッセージ】\n${input}`;
                    callGemini(prompt, resultElement, generateCommBtn);
                });
            }

            const generateAnalysisBtn = document.getElementById('generate-analysis-btn');
            if(generateAnalysisBtn) {
                generateAnalysisBtn.addEventListener('click', () => {
                    const input = document.getElementById('analysis-input').value;
                    const resultElement = document.getElementById('analysis-result');
                     if(input.trim() === '') {
                        resultElement.innerText = '分析したいケーススタディを入力してください。';
                        return;
                    }
                    const prompt = `あなたは同行援護の研修ファシリテーターです。以下のケーススタディについて、グループディスカッションを深めるための論点を3つ抽出し、それぞれについて具体的な問いかけを作成してください。\n\n【ケーススタディ】\n${input}`;
                    callGemini(prompt, resultElement, generateAnalysisBtn);
                });
            }

            const generateStressBtn = document.getElementById('generate-stress-btn');
            if(generateStressBtn) {
                generateStressBtn.addEventListener('click', () => {
                    const input = document.getElementById('stress-input').value;
                    const resultElement = document.getElementById('stress-result');
                     if(input.trim() === '') {
                        resultElement.innerText = 'ストレスを感じた状況を入力してください。';
                        return;
                    }
                    const prompt = `あなたは対人援助職専門のカウンセラーです。以下のストレス状況に対して、具体的で実践的なセルフケアの方法や、認知の転換を促す考え方のヒントを3〜5個、共感的で優しい口調で提案してください。\n\n【ストレス状況】\n${input}`;
                    callGemini(prompt, resultElement, generateStressBtn);
                });
            }
            
            const generateRephraseBtn = document.getElementById('generate-rephrase-btn');
            if(generateRephraseBtn) {
                generateRephraseBtn.addEventListener('click', () => {
                    const input = document.getElementById('rephrase-input').value;
                    const resultElement = document.getElementById('rephrase-result');
                     if(input.trim() === '') {
                        resultElement.innerText = '曖昧な表現を入力してください。';
                        return;
                    }
                    const prompt = `あなたは同行援護の達人です。以下の曖昧な指示を、視覚障害のある方にとって明確で、安全かつ具体的な指示に書き換えてください。時計の方向や歩数、具体的な目印などを用いて、複数の選択肢を提示してください。\n\n【曖昧な指示】\n${input}`;
                    callGemini(prompt, resultElement, generateRephraseBtn);
                });
            }

            const startNegotiationBtn = document.getElementById('start-negotiation-btn');
            if(startNegotiationBtn) {
                startNegotiationBtn.addEventListener('click', () => {
                    const input = document.getElementById('negotiation-input').value;
                    const resultElement = document.getElementById('negotiation-result');
                     if(input.trim() === '') {
                        resultElement.innerText = '最初の言葉かけを入力してください。';
                        return;
                    }
                    const prompt = `あなたはロールプレイの相手役です。私は同行援護の研修生で、合理的配慮を求める交渉の練習をしています。私の最初の言葉かけに対して、少しだけ協力的ではない、あるいは多忙な店員や職員として応答してください。ただし、完全に拒絶するのではなく、対話の余地を残してください。\n\n【私の最初の言葉】\n${input}`;
                    callGemini(prompt, resultElement, startNegotiationBtn);
                });
            }

            const generateReflectionBtn = document.getElementById('generate-reflection-btn');
            if(generateReflectionBtn) {
                generateReflectionBtn.addEventListener('click', () => {
                    const input = document.getElementById('reflection-input').value;
                    const resultElement = document.getElementById('reflection-result');
                     if(input.trim() === '') {
                        resultElement.innerText = '振り返りたい経験を入力してください。';
                        return;
                    }
                    const prompt = `あなたは対人援助職専門のスーパーバイザーです。研修生が振り返りたい経験について、Gibbsのリフレクティブ・サイクルに基づき、内省を深めるためのガイドとなる質問を各ステップごとに作成してください。\n\n【研修生の経験】\n${input}`;
                    callGemini(prompt, resultElement, generateReflectionBtn);
                });
            }

            const generateRecommenderBtn = document.getElementById('generate-recommender-btn');
            if(generateRecommenderBtn) {
                generateRecommenderBtn.addEventListener('click', () => {
                    const input = document.getElementById('recommender-input').value;
                    const resultElement = document.getElementById('recommender-result');
                     if(input.trim() === '') {
                        resultElement.innerText = '課題や学びたいことを入力してください。';
                        return;
                    }
                    const trainingTitles = trainingData.map((s, i) => `${i}回：${s.title}`).join('\n');
                    const prompt = `あなたは同行援護研修のベテラン講師です。以下の研修プログラム全体を理解した上で、研修生が抱える下記の課題解決に最も役立つ研修回を1つだけ選び、その理由を具体的に説明してください。\n\n【研修プログラム一覧】\n${trainingTitles}\n\n【研修生の課題】\n${input}`;
                    callGemini(prompt, resultElement, generateRecommenderBtn);
                });
            }
            
            // New Listeners
            const generateRecordBtn = document.getElementById('generate-record-btn');
            if(generateRecordBtn) {
                generateRecordBtn.addEventListener('click', () => {
                    const input = document.getElementById('record-input').value;
                    const resultElement = document.getElementById('record-result');
                     if(input.trim() === '') {
                        resultElement.innerText = '支援メモを入力してください。';
                        return;
                    }
                    const prompt = `あなたは同行援護のサービス提供責任者です。以下の支援スタッフの個人的なメモを、客観的で専門的な公式の「支援記録」に書き換えてください。時間、場所、具体的な事実、利用者の言動、支援者の対応を明確に記述し、主観的な感情や感想は排除してください。\n\n【支援メモ】\n${input}`;
                    callGemini(prompt, resultElement, generateRecordBtn);
                });
            }

            const generateSupervisionBtn = document.getElementById('generate-supervision-btn');
            if(generateSupervisionBtn) {
                generateSupervisionBtn.addEventListener('click', () => {
                    const input = document.getElementById('supervision-input').value;
                    const resultElement = document.getElementById('supervision-result');
                     if(input.trim() === '') {
                        resultElement.innerText = '話し合いたいケースを入力してください。';
                        return;
                    }
                    const prompt = `あなたはピアスーパービジョンの経験豊富なファシリテーターです。以下の困難なケースについて、建設的で安全な話し合いを促進するためのアジェンダと、各メンバーに投げかけるべき具体的な問いかけを作成してください。\n\n【相談ケース】\n${input}`;
                    callGemini(prompt, resultElement, generateSupervisionBtn);
                });
            }
            
            const generateSoundBtn = document.getElementById('generate-sound-btn');
            if(generateSoundBtn) {
                generateSoundBtn.addEventListener('click', () => {
                    const input = document.getElementById('sound-input');
                    const resultElement = document.getElementById('sound-result');
                     if(input.value.trim() === '') {
                        resultElement.innerText = '場所を入力してください。';
                        return;
                    }
                    const prompt = `あなたは同行援護の専門家で、特に聴覚情報を活用したナビゲーション（オリエンテーション＆モビリティ）に精通しています。以下の場所で聞こえるであろう代表的な環境音を5つ挙げ、それぞれが視覚障害者のナビゲーションにとってどのような意味を持つか（例：位置特定の手がかり、危険の予兆など）を具体的に解説してください。\n\n【場所】\n${input.value}`;
                    callGemini(prompt, resultElement, generateSoundBtn);
                });
            }

            const generateTechPlanBtn = document.getElementById('generate-tech-plan-btn');
            if(generateTechPlanBtn) {
                generateTechPlanBtn.addEventListener('click', () => {
                    const techName = document.getElementById('tech-name-input').value;
                    const userSituation = document.getElementById('tech-user-input').value;
                    const resultElement = document.getElementById('tech-plan-result');

                    if(techName.trim() === '' || userSituation.trim() === '') {
                        resultElement.innerText = '技術と利用者の状況の両方を入力してください。';
                        return;
                    }

                    const prompt = `あなたは視覚障害者向けの支援技術の教育専門家です。以下の技術を、特定の状況にある利用者に教えるための、段階的な指導計画（3〜5ステップ）を作成してください。利用者の不安を取り除き、成功体験を積ませることを重視した、具体的で優しいアプローチを提案してください。\n\n【導入したい技術】\n${techName}\n\n【利用者の状況】\n${userSituation}`;
                    callGemini(prompt, resultElement, generateTechPlanBtn);
                });
            }
        }

        function renderHeinrichChart() {
            const ctx = document.getElementById('heinrichChart')?.getContext('2d');
            if (!ctx) return;

            chartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['重大な事故', '軽微な事故', 'ヒヤリハット'],
                    datasets: [{
                        label: '発生件数（比率）',
                        data: [1, 29, 300],
                        backgroundColor: [
                            'rgba(220, 38, 38, 0.6)',
                            'rgba(245, 158, 11, 0.6)',
                            'rgba(5, 150, 105, 0.6)'
                        ],
                        borderColor: [
                            'rgba(220, 38, 38, 1)',
                            'rgba(245, 158, 11, 1)',
                            'rgba(5, 150, 105, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            type: 'logarithmic',
                            title: {
                                display: true,
                                text: '発生件数（対数スケール）'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'ハインリッヒの法則 (1:29:300)',
                            font: {
                                size: 16
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` 比率: ${context.raw}`;
                                }
                            }
                        }
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderNav();
            renderContent();
        });

    </script>
</body>
</html>
